//////////////////////////////////////////////////////////////////////
//
// Filename    : GCHPRecoveryStartToSelf.cpp
// Written By  : elca@ewestsoft.com
// Description : Packet notifying the player that their HP recovery has begun.
//
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
// include files
//////////////////////////////////////////////////////////////////////
#include "GCHPRecoveryStartToSelf.h"


//////////////////////////////////////////////////////////////////////
// constructor
//////////////////////////////////////////////////////////////////////
GCHPRecoveryStartToSelf::GCHPRecoveryStartToSelf()

    {__BEGIN_TRY __END_CATCH}


//////////////////////////////////////////////////////////////////////
// destructor
//////////////////////////////////////////////////////////////////////
GCHPRecoveryStartToSelf::~GCHPRecoveryStartToSelf()

{
    __BEGIN_TRY
    __END_CATCH_NO_RETHROW
}


//////////////////////////////////////////////////////////////////////
// Initialize packet by reading data from the incoming stream.
//////////////////////////////////////////////////////////////////////
void GCHPRecoveryStartToSelf::read(SocketInputStream& iStream)

{
    __BEGIN_TRY

    // Read recovery timing parameters.
    iStream.read(m_Delay);
    iStream.read(m_Period);
    iStream.read(m_Quantity);

    __END_CATCH
}


//////////////////////////////////////////////////////////////////////
// Serialize packet data to the outgoing stream.
//////////////////////////////////////////////////////////////////////
void GCHPRecoveryStartToSelf::write(SocketOutputStream& oStream) const {
    __BEGIN_TRY

    // Write recovery timing parameters.
    oStream.write(m_Delay);
    oStream.write(m_Period);
    oStream.write(m_Quantity);

    __END_CATCH
}


//////////////////////////////////////////////////////////////////////
//
// execute packet's handler
//
//////////////////////////////////////////////////////////////////////
void GCHPRecoveryStartToSelf::execute(Player* pPlayer)

{
    __BEGIN_TRY

    GCHPRecoveryStartToSelfHandler::execute(this, pPlayer);

    __END_CATCH
}


//////////////////////////////////////////////////////////////////////
//
// get packet's debug string
//
//////////////////////////////////////////////////////////////////////
string GCHPRecoveryStartToSelf::toString() const {
    __BEGIN_TRY

    StringStream msg;
    msg << "GCHPRecoveryStartToSelf("
        << "Delay:" << (int)m_Delay << "Period:" << (int)m_Period << "Quantity:" << (int)m_Quantity << ")";
    return msg.toString();

    __END_CATCH
}
